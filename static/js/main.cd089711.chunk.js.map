{"version":3,"sources":["components/Card/Card.js","store/api/api.js","store/actions/actionsCards.js","store/api/getCards.js","containers/Places/Places.js","components/Comment/img/icon-user.svg","components/Comment/Comment.js","containers/Popup/Popup.js","components/Header/Header.js","containers/App/App.js","store/initialStates/initialStates.js","store/initialStates/initialStateCards.js","store/reducers/reducerCards.js","store/reducers/redusers.js","store/store.js","index.js"],"names":["Card","openPopupHandler","card","openPopup","useCallback","date","className","onClick","type","src","image","alt","api","url","this","_url","fetch","then","response","json","data","cards","actionsCardsTypes","actionsCards","payload","getCards","dispatch","Places","useSelector","store","useDispatch","useState","firstCard","lastCard","countCards","setCountCards","useEffect","getMoreCards","newLastCard","Object","values","slice","map","length","Comment","comment","user","Popup","openCard","value","stateValue","setStateValue","closeEsc","event","key","closePopup","document","body","style","overflow","window","addEventListener","removeEventListener","changeValue","evt","target","addNewComment","preventDefault","newCards","comments","unshift","likeClickHandler","item","like","classLike","classNames","onSubmit","onChange","placeholder","Header","App","initialStates","reducerCards","state","action","reducers","combineReducers","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.cd089711.chunk.js","sourcesContent":["import \"./styles/card.scss\";\nimport PropTypes from 'prop-types';\nimport { useCallback } from \"react\";\n\nconst Card = ({openPopupHandler, card}) => {\n  const openPopup = useCallback(() => {\n    openPopupHandler(card.date);\n  }, [card, openPopupHandler]);\n\n  return (\n    <li className=\"places__item card\">\n      <button onClick={openPopup} className=\"card__button\" type=\"button\">\n        <img className=\"card__image\" src={card.image} alt=\"изображение\" />\n      </button>\n    </li>\n  )\n};\n\nCard.propTypes = {\n  openPopupHandler: PropTypes.func,\n  card: PropTypes.shape({\n    image: PropTypes.string,\n    like: PropTypes.string,\n    date: PropTypes.number,\n    comment: PropTypes.arrayOf(PropTypes.string)\n  })\n}\n\nexport default Card;\n","class API {\n  constructor(url) {\n    this._url = url;\n  }\n\n  getCards() {\n    return fetch(this._url)\n            .then(response => response.json())\n            .then((data) => {\n              return data.cards;\n    })\n  };\n};\n\nconst api = new API(`./data/data.json`);\n\nexport {api};\n","const actionsCardsTypes = {\n  CHANGE_CARDS: `CHANGE_CARDS`,\n  CHANGE_ACTIVE_CARD: `CHANGE_ACTIVE_CARD`\n};\n\nconst actionsCards = {\n  changeCards: (payload) => ({type: actionsCardsTypes.CHANGE_CARDS, payload}),\n  changeActiveCard: (payload) => ({type: actionsCardsTypes.CHANGE_ACTIVE_CARD, payload})\n};\n\nexport { actionsCards, actionsCardsTypes };\n","import { api } from \"./api\";\nimport { actionsCards } from \"../actions/actionsCards\";\n\nconst getCards = () => {\n  return dispatch => {\n    api.getCards().then((cards) => {\n      dispatch(actionsCards.changeCards(cards));\n    });\n  };\n};\n\nexport default getCards;\n","import Card from '../../components/Card/Card';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useEffect, useState, useCallback } from 'react';\nimport getCards from '../../store/api/getCards';\nimport './styles/places.scss';\nimport { actionsCards } from '../../store/actions/actionsCards';\n\nconst Places = () => {\n  const data = useSelector(store => store.cards);\n  const dispatch = useDispatch();\n  const [countCards, setCountCards] = useState({firstCard: 0, lastCard: 9});\n\n  useEffect(() => {\n    dispatch(getCards());\n  }, [dispatch]);\n\n  const openPopup = useCallback((date) => {\n    dispatch(actionsCards.changeActiveCard(date));\n  }, [dispatch]);\n\n  const getMoreCards = useCallback(() => {\n    const STEP = 9;\n    const newLastCard = countCards.lastCard + STEP;\n\n    setCountCards({firstCard: countCards.firstCard, lastCard: newLastCard});\n  }, [countCards]);\n\n  return (\n    <section className=\"places page__section\">\n      <ul className=\"places__list\">\n       {\n        data.cards && Object.values(data.cards).slice(countCards.firstCard, countCards.lastCard).map((card) => {\n           return <Card key={card.date} openPopupHandler={openPopup} card={card} />\n         })\n       }\n      </ul>\n      { Object.values(data.cards).length >= countCards.lastCard &&\n        <button onClick={getMoreCards} className=\"places__button-more\" type=\"button\">больше фото</button>\n      }\n    </section>\n  )\n};\n\nexport default Places;\n","export default __webpack_public_path__ + \"static/media/icon-user.8530a465.svg\";","import PropTypes from 'prop-types';\nimport user from \"./img/icon-user.svg\";\nimport \"./styles/comment.scss\";\n\nconst Comment = ({comment}) => {\n  return (\n    <li className=\"comment\">\n      <div className=\"comment__user-info\">\n        <img src={user} className=\"comment__user-photo\" alt=\"фото пользователя\" />\n        <p className=\"comment__user-name\">Пользователь</p>\n      </div>\n      <p className=\"comment__text\">{comment}</p>\n    </li>\n  )\n};\n\nComment.propTypes = {\n  comment: PropTypes.string\n};\n\nexport default Comment;\n","import { useSelector, useDispatch } from \"react-redux\";\nimport { useCallback, useState, useEffect } from \"react\";\nimport { actionsCards } from \"../../store/actions/actionsCards\";\nimport Comment from \"../../components/Comment/Comment\";\nimport classNames from 'classnames/bind';\nimport \"./styles/popup.scss\";\n\nconst Popup = () => {\n  const data = useSelector(store => store.cards);\n  const dispatch = useDispatch();\n  const card = data.cards[data.openCard];\n  const [stateValue, setStateValue] = useState({value: \"\"});\n\n  useEffect(() => {\n    const closeEsc = (event) => {\n      if (event.key === `Escape`) {\n        closePopup();\n      };\n    };\n    document.body.style.overflow = `hidden`;\n    window.addEventListener(`keydown`, closeEsc);\n    return () => {\n      document.body.style.overflow = `auto`;\n      window.removeEventListener(`keydown`, closeEsc);\n    };\n  });\n\n  const closePopup = useCallback(() => {\n    dispatch(actionsCards.changeActiveCard(null));\n  }, [dispatch]);\n\n  const changeValue = useCallback((evt) => {\n    setStateValue({value: evt.target.value});\n  }, []);\n\n  const addNewComment = useCallback((evt) => {\n    evt.preventDefault();\n    if (stateValue.value === \"\") {\n      return\n    };\n    const newCards = data.cards;\n    const comment = stateValue.value;\n    newCards[data.openCard].comments.unshift(comment);\n    dispatch(actionsCards.changeCards(newCards));\n    setStateValue({value: \"\"});\n  }, [stateValue, data.cards, data.openCard, dispatch]);\n\n  const likeClickHandler = useCallback(() => {\n    const newCards = data.cards;\n    const item = newCards[data.openCard];\n    if (item.like === `true`) {\n      item.like = `false`\n    } else {\n      item.like = `true`\n    };\n    dispatch(actionsCards.changeCards(newCards));\n  }, [data.cards, data.openCard, dispatch]);\n\n  const classLike = classNames({\n    \"popup__button-like\": true,\n    \"popup__button-like_active\": card.like === \"true\"\n  });\n\n  return (\n    <div className=\"popup\">\n      <div className=\"popup__container\">\n        <img className=\"popup__image\" src={card.image} alt=\"изображение\" />\n        <div className=\"popup__wrapper\">\n          <ul className=\"popup__comments\">\n            {\n              card && card.comments.length > 0 && card.comments.map((comment) => {\n                return (\n                  <Comment key={comment} comment={comment} />\n                )\n              })\n            }\n          </ul>\n          <div className=\"popup__like-container\">\n            <button onClick={likeClickHandler} className={classLike} type=\"button\"></button>\n          </div>\n          <form onSubmit={addNewComment} className=\"popup__form\">\n            <textarea onChange={changeValue} className=\"popup__new-comment\" value={stateValue.value} placeholder=\"Добавить комментарий\"></textarea>\n            <button className=\"popup__button-submit\" type=\"submit\"></button>\n          </form>\n        </div>\n        <button onClick={closePopup} className=\"popup__button-close\"></button>\n      </div>\n    </div>\n  )\n};\n\nexport default Popup;\n","import \"./styles/header.scss\";\n\nconst Header = () => {\n  return (\n    <header className=\"header page__section\">\n      <h1 className=\"header__title\">Тестовое задание, Сергей Комлев</h1>\n    </header>\n  )\n};\n\nexport default Header;\n","import './styles/app.scss';\nimport Places from '../Places/Places';\nimport { useSelector } from 'react-redux';\nimport Popup from '../Popup/Popup';\nimport Header from '../../components/Header/Header';\n\nfunction App() {\n  const data = useSelector(store => store.cards);\n\n  return (\n    <div className=\"page__content\">\n      <Header />\n      <main className=\"content\">\n        <Places />\n      </main>\n      {data.openCard !== null && <Popup />}\n    </div>\n  );\n}\n\nexport default App;\n","import initialStateCards from \"./initialStateCards\";\n\nconst initialStates = {\n  cards: initialStateCards\n};\n\nexport default initialStates;\n","const initialStateCards = {\n  cards: {},\n  openCard: null\n};\n\nexport default initialStateCards;\n","import { actionsCardsTypes } from \"../actions/actionsCards\";\nimport initialStates from \"../initialStates/initialStates\";\n\nconst reducerCards= (state = initialStates.cards, action) => {\n  switch(action.type) {\n    case actionsCardsTypes.CHANGE_CARDS:\n      return {\n        ...state,\n        cards: action.payload\n      };\n    case actionsCardsTypes.CHANGE_ACTIVE_CARD:\n      return {\n        ...state,\n        openCard: action.payload\n      };\n    default:\n      return state;\n  };\n};\n\nexport default reducerCards;\n","import { combineReducers } from 'redux';\nimport reducerCards from './reducerCards';\n\nconst reducers = combineReducers({\n  cards: reducerCards\n});\n\nexport default reducers;\n","import { createStore, applyMiddleware } from \"redux\";\nimport reducers from \"./reducers/redusers\";\nimport thunk from \"redux-thunk\";\n\nconst store = createStore(reducers, applyMiddleware(thunk));\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './containers/App/App';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport store from './store/store';\nimport './index.scss';\nimport './normalize.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}